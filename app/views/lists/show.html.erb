<p style="color: green"><%= notice %></p>

<h2><%= @list.name %></h2>

<div class="d-flex gap-2">
  <%= link_to "Back to lists", lists_path, class: "btn btn-primary" %>
  <%= link_to "Add Movie", new_list_bookmark_path(@list), class: "btn btn-warning" %>
</div>
<div class="container py-5">
  <div class="row row-cols-1 row-cols-md-3 g-4"> <% @list.bookmarks.each do |bookmark| %>
      <div class="col">

        <div class="card h-100 shadow-sm border-0 transition-hover"> <img class="card-img-top" src="<%= bookmark.movie.poster_url %>" alt="<%= bookmark.movie.title %>" style="max-height: 400px; object-fit: contain;">

          <div class="card-body" data-controller="read-more">
            <h5 class="card-title"><strong><%= bookmark.movie.title %></strong></h5>
            <p class="card-text" data-read-more-target="short">
            <%= bookmark.movie.overview.truncate(100) %>

            <% if bookmark.movie.overview.length > 100 %>
              <span role="button"
                    class="text-primary fw-bold"
                    style="cursor: pointer;"
                    data-action="click->read-more#toggle">
                Read more <i class="fa-solid fa-caret-down"></i>
              </span>
            <% end %>
          </p>

          <p class="card-text d-none" data-read-more-target="full">
            <%= bookmark.movie.overview %>

            <span role="button"
                  class="text-secondary fw-bold"
                  style="cursor: pointer;"
                  data-action="click->read-more#toggle">
              Read less <i class="fa-solid fa-caret-up"></i>
            </span>
          </p>
            <p class="card-text"><em>"IMDB rating: <%= bookmark.movie.rating %>‚≠ê"</em></p>
            <hr>
            <p class="card-text"><em>"<%= bookmark.comment %>"</em></p>
          </div>
          <div class="card-footer bg-transparent text-end">
            <%= link_to bookmark_path(bookmark),
              data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
              class: "text-danger text-decoration-none" do %>
                <i class="fa-solid fa-trash-can"></i>
              <% end %>
          </div>
        </div>

      </div>
    <% end %>
  </div>
</div>
